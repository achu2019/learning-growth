## 10 | 案例篇：系统的软中断CPU使用率升高，我该怎么办？

### 笔记

软中断处理程序被分为上下半两部分：

- 上半部分对应硬中断，用来快速处理中断；
- 下半部分对应软中断，用来异步处理上半部分未完成的工作。

/proc/softirqs 软中断的运行情况，但是这里面是累积中断次数，而我们应该关注的是中断次数的变化速率。

工具：sar、hping3、tcpdump

当你看 top 报告时，不要忽略任何细节，比方说软中断占比不高，但是一直都在持续，也是可能有问题的。

sar 可以用来查看系统的网络收发情况，可以观察网络收发的吞吐量（BPS, 每秒收发的字节数），可以观察网络收发的 PPS（每秒收发的网络帧数）

### 发现面试题

如何解决 SYN FLOOD 攻击呢？（从交换机或者硬件防火墙中封掉来源IP，这样 SYN FLOOD 网络帧就不会发送到服务器中了。

用什么工具可以观察命令输出的变化情况呢？（watch 命令，定期运行一个命令来查看输出，加上 -d 参数还可以高亮出变化的部分。

